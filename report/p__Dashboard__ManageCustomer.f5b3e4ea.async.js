(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"16ed":function(e,t,a){"use strict";a.r(t);a("miYZ");var n=a("tsqr"),r=(a("IzEo"),a("bx4M")),l=(a("g9YV"),a("wCAj")),o=a("p0pE"),i=a.n(o),c=(a("/zsF"),a("PArb")),s=(a("5Dmo"),a("3S7+")),d=a("2Taf"),u=a.n(d),m=a("vZ4D"),p=a.n(m),h=a("l4Ni"),y=a.n(h),g=a("ujKo"),f=a.n(g),E=a("rlhR"),C=a.n(E),w=a("MhPg"),v=a.n(w),b=(a("2qtc"),a("kLXV")),A=(a("OaEy"),a("2fM7")),S=(a("5NDa"),a("5rEg")),N=(a("y8nQ"),a("Vl3Y")),x=a("q1tI"),M=a.n(x),k=a("MuoO"),T=a("wd/R"),L=a.n(T),I=a("sEfC"),P=a.n(I),O=(a("h7lp"),a("bf48")),F=a("jehZ"),D=a.n(F),V=a("Y/ft"),z=a.n(V),_=(a("Znn+"),a("ZTPi")),R=(a("tU7J"),a("wFql")),q=a("Y2fQ"),B=a("mOP9"),W=a("TSYQ"),K=a.n(W),Q=a("lh+i"),H=a.n(Q),j=function(e){function t(){return u()(this,t),y()(this,f()(t).apply(this,arguments))}return v()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.contentWidth,a=e.children,n="".concat(H.a.main);return"Fixed"===t&&(n="".concat(H.a.main," ").concat(H.a.wide)),M.a.createElement("div",{className:n},a)}}]),t}(x["PureComponent"]),Y=Object(k["connect"])(function(e){var t=e.setting;return{contentWidth:t.contentWidth}})(j),U=a("Dnn4"),J=a.n(U),Z=Object(x["createContext"])(),X=a("bALw"),G=a.n(X);function $(e){var t=e.split("/").filter(function(e){return e});return t.map(function(e,a){return"/".concat(t.slice(0,a+1).join("/"))})}var ee,te,ae,ne,re,le,oe,ie=a("T+dw"),ce=function(e,t,a,n){var r=a.indexOf(e)===a.length-1;return"/"===e.path?M.a.createElement(B["a"],{to:n.join("/")},e.breadcrumbName):r||!e.component?M.a.createElement("span",null,e.breadcrumbName):M.a.createElement(B["a"],{to:n.join("/")},e.breadcrumbName)},se=function(e){if(e.locale){var t=ie["menu"].disableLocal?e.name:Object(q["formatMessage"])({id:e.locale,defaultMessage:e.name});return t}return e.name},de=function(e,t){var a=e[t];return a||Object.keys(e).forEach(function(n){G()(n).test(t)&&(a=e[n])}),a||{}},ue=function(e){var t=e.routes,a=e.params,n=e.location,r=e.breadcrumbNameMap;return{routes:t,params:a,routerLocation:n,breadcrumbNameMap:r}},me=function(e){var t=e.breadcrumbList;return t.map(function(e){var t=e.title,a=e.href;return{path:a,breadcrumbName:t}})},pe=function(e,t,a){var n=a.home,r=$(e.pathname),l=r.map(function(e){var a=de(t,e);if(a.inherited)return null;var n=se(a),r=a.hideInBreadcrumb;return n&&!r?{path:e,breadcrumbName:n}:null}).filter(function(e){return null!==e});return n&&l.unshift({path:"/",breadcrumbName:n}),l},he=function(e){var t=e.breadcrumbList,a=ue(e),n=a.routes,r=a.params,l=a.routerLocation,o=a.breadcrumbNameMap;return t&&t.length?{routes:me(e),params:r,itemRender:ce}:n&&r?{routes:n.filter(function(e){return e.breadcrumbName}),params:r,itemRender:ce}:l&&l.pathname?{routes:pe(l,o,e),itemRender:ce}:{}},ye=R["a"].Title,ge=function(e){var t=e.tabList,a=e.tabActiveKey,n=e.onTabChange,r=e.tabBarExtraContent;return t&&t.length?M.a.createElement(_["a"],{className:J.a.tabs,activeKey:a,onChange:function(e){n&&n(e)},tabBarExtraContent:r},t.map(function(e){return M.a.createElement(_["a"].TabPane,{tab:e.tab,key:e.key})})):null},fe=function(e){var t=e.children,a=e.contentWidth,n=e.wrapperClassName,r=e.top,l=e.title,o=e.content,c=e.logo,s=e.extraContent,d=e.hiddenBreadcrumb,u=z()(e,["children","contentWidth","wrapperClassName","top","title","content","logo","extraContent","hiddenBreadcrumb"]);return M.a.createElement("div",{style:{margin:"-24px -24px 0"},className:K()(n,J.a.main)},r,M.a.createElement(Z.Consumer,null,function(e){return M.a.createElement(O["a"],D()({wide:"Fixed"===a,title:l&&M.a.createElement(ye,{level:4,style:{marginBottom:0}},l),key:"pageheader"},u,{breadcrumb:!d&&he(i()({},e,u,{home:M.a.createElement(q["FormattedMessage"],{id:"menu.home",defaultMessage:"Home"})})),className:J.a.pageHeader,linkElement:B["a"],footer:ge(u)}),M.a.createElement("div",{className:J.a.detail},c&&M.a.createElement("div",{className:J.a.logo},c),M.a.createElement("div",{className:J.a.main},M.a.createElement("div",{className:J.a.row},o&&M.a.createElement("div",{className:J.a.content},o),s&&M.a.createElement("div",{className:J.a.extraContent},s)))))}),t?M.a.createElement("div",{className:J.a["children-content"]},M.a.createElement(Y,null,t)):null)},Ee=Object(k["connect"])(function(e){var t=e.setting;return{contentWidth:t.contentWidth}})(fe),Ce=(a("DjyN"),a("NUBc")),we=(a("Mwp2"),a("VXEj")),ve=function(e){function t(){return u()(this,t),y()(this,f()(t).apply(this,arguments))}return v()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.list;return M.a.createElement("div",{style:{height:480,overflowY:"auto"}},M.a.createElement(we["a"],{itemLayout:"horizontal",dataSource:e,renderItem:function(e){return M.a.createElement(we["a"].Item,{key:e.id},M.a.createElement(we["a"].Item.Meta,{title:M.a.createElement("div",null,M.a.createElement("span",null,"\u64cd\u4f5c\u4eba\uff1a"),M.a.createElement("span",null,e.operatorName)),description:M.a.createElement("div",null,M.a.createElement("span",null,"\u64cd\u4f5c\u4e8b\u4ef6\uff1a"),M.a.createElement("span",null,e.content))}),M.a.createElement("div",{style:{fontSize:13,fontWeight:400,color:"rgba(0, 0, 0, 0.4)",padding:"0 20px"}},M.a.createElement("div",null,"\u64cd\u4f5c\u65f6\u95f4\uff1a"),M.a.createElement("div",null,L()(e.createTime).format("YYYY-MM-DD HH:mm:ss"))))}}))}}]),t}(x["PureComponent"]),be=_["a"].TabPane,Ae=N["a"].Item,Se=S["a"].TextArea,Ne=A["a"].Option,xe=(ee=N["a"].create(),ee((ae=function(e){function t(e){var a;return u()(this,t),a=y()(this,f()(t).call(this,e)),a.isPlatform=[{key:0,value:"\u662f"},{key:1,value:"\u5426"}],a.addOk=function(e){e.persist(),e.preventDefault();var t=a.props,n=t.form,r=t.handleOk;n.validateFields(function(e,t){e||r(t,n)})},a.addCancel=function(){var e=a.props.changeState,t=a.props.form;t.resetFields(),e(!1)},a.onChangePage=function(e,t){var n=a.props,r=n.changePage,l=n.logPagination;l.current=e,l.pageSize=t,r(l)},a.onShowSizeChange=function(e,t){var n=a.props,r=n.changePage,l=n.logPagination;l.current=1,l.pageSize=t,r(l)},a.addOk=P()(a.addOk,300),a}return v()(t,e),p()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.logList,r=t.showCustModal,l=t.title,o=t.isAddCustomer,i=void 0!==o&&o,s=t.advertisersType,d=void 0===s?[]:s,u=this.props.customerObj;u=u||{};var m=function(){var t={display:"inline-block",width:"calc(48% - 12px)"};return M.a.createElement(N["a"],{layout:"inline",labelCol:{span:9},wrapperCol:{span:14}},M.a.createElement(Ae,{label:"\u5e7f\u544a\u9500\u552e\u4eba",style:t},a("advertiser",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:u.advertiser})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u5e7f\u544a\u5ba2\u6237\u7c7b\u578b",style:t},a("advertisersType",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:u.advertisersType})(M.a.createElement(A["a"],{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",style:{width:180}},d.map(function(e){return M.a.createElement(Ne,{value:e.paramKey,key:e.paramKey},e.paramValue)})))),M.a.createElement(Ae,{label:"\u516c\u53f8\u540d\u79f0",style:t},a("companyName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:u.companyName})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u5546\u94fa\u540d\u79f0",style:t},a("shopName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:u.shopName})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u5ba2\u6237\u540d\u79f0",style:t},a("customerName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:u.customerName})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u5ba2\u6237\u7535\u8bdd",style:t},a("customerPhone",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:u.customerPhone})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(c["a"],{dashed:!0}),M.a.createElement(Ae,{label:"\u5fae\u4fe1\u5ba2\u670d\u8d26\u53f7",style:t},a("wxServiceAccount",{initialValue:u.wxServiceAccount})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u552e\u540e\u8054\u7cfb\u4eba\u59d3\u540d",style:t},a("afterSalesName",{initialValue:u.afterSalesName})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u552e\u540e\u8054\u7cfb\u4eba\u7535\u8bdd",style:t},a("afterSalesPhone",{initialValue:u.afterSalesPhone})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u552e\u540e\u9000\u8d27\u5730\u5740",style:t},a("afterSalesAddress",{initialValue:u.afterSalesAddress})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u662f\u5426\u6709\u5e73\u53f0",style:t},a("havaPlatform",{rules:[{required:!1,message:"\u8bf7\u9009\u62e9"}],initialValue:u.havaPlatform})(M.a.createElement(A["a"],{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",style:{width:180}},e.isPlatform.map(function(e){return M.a.createElement(Ne,{value:e.key,key:e.key},e.value)})))),M.a.createElement(c["a"],{dashed:!0}),M.a.createElement(Ae,{label:"\u6280\u672f\u8d1f\u8d23\u4eba",style:t},a("technicalDirector",{initialValue:u.technicalDirector})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u6280\u672f\u8d1f\u8d23\u4eba\u7535\u8bdd",style:t},a("technicalDirectorPhone",{initialValue:u.technicalDirectorPhone})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u8fd0\u8425\u8d1f\u8d23\u4eba",style:t},a("operationDirector",{initialValue:u.operationDirector})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{label:"\u8fd0\u8425\u8d1f\u8d23\u4eba\u7535\u8bdd",style:t},a("operationDirectorPhone",{initialValue:u.operationDirectorPhone})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Ae,{layout:"horizontal"},a("remark",{initialValue:u.remark})(M.a.createElement(Se,{placeholder:"\u5907\u6ce8",className:"custom",style:{width:1e3,height:50,marginTop:22,marginLeft:20}}))))},p=function(){var t=e.props.logPagination;return i?m():M.a.createElement("div",{style:{marginTop:"-24px"}},M.a.createElement(_["a"],{defaultActiveKey:"1"},M.a.createElement(be,{tab:"\u5ba2\u6237\u4fe1\u606f",key:"1"},m()),M.a.createElement(be,{tab:"\u64cd\u4f5c\u65e5\u5fd7",key:"2"},M.a.createElement(ve,{list:n}),M.a.createElement("div",{style:{padding:10,float:"right"}},M.a.createElement(Ce["a"],D()({},t,{onChange:e.onChangePage,onShowSizeChange:e.onShowSizeChange}))))))};return M.a.createElement(b["a"],{title:l,centered:!0,visible:r,onOk:this.addOk,onCancel:this.addCancel,width:700},p())}}]),t}(x["PureComponent"]),te=ae))||te),Me=xe,ke=(a("Pwec"),a("CtXQ")),Te=ke["a"].createFromIconfontCN({scriptUrl:ie["iconfontUrl"]}),Le=a("zjn/"),Ie=a.n(Le),Pe=N["a"].Item,Oe=S["a"].Search,Fe=S["a"].Group,De=A["a"].Option,Ve=b["a"].confirm,ze=(ne=Object(k["connect"])(function(e){var t=e.customer;return{customerList:t.customerList,logList:t.logList,editingCustomer:t.editingCustomer,advertisersType:t.advertisersType,mediaAccountList:t.mediaAccountList,acountTypeList:t.acountTypeList,platformChannels:t.platformChannels,editingMediaAccount:t.editingMediaAccount,memberList:t.memberList}}),re=N["a"].create(),ne(le=re((oe=function(e){function t(e){var a;return u()(this,t),a=y()(this,f()(t).call(this,e)),a.yesOrNo=[{key:0,value:"\u5426"},{key:1,value:"\u662f"}],a.columns=[{title:"\u5ba2\u6237ID",dataIndex:"customerCode",key:"customerCode",width:"12.5%"},{title:"\u516c\u53f8\u540d\u79f0",dataIndex:"companyName",key:"companyName",width:"12.5%"},{title:"\u5e7f\u544a\u5ba2\u6237\u7c7b\u578b",dataIndex:"advertisersTypeStr",key:"advertisersTypeStr",width:"12.5%"},{title:"\u5e7f\u544a\u9500\u552e\u4eba",dataIndex:"advertiser",key:"advertiser",width:"12.5%"},{title:"\u5ba2\u6237\u59d3\u540d",dataIndex:"customerName",key:"customerName",width:"12.5%"},{title:"\u5ba2\u6237\u7535\u8bdd",dataIndex:"customerPhone",key:"customerPhone",width:"12.5%"},{title:"\u5e7f\u544a\u6e20\u9053",dataIndex:"adChannels",key:"adChannels",width:"12.5%",render:function(e){return M.a.createElement("div",null,e.map(function(e){return M.a.createElement("div",null,e)}))}},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",width:"12.5%",render:function(e,t){var n=a.state.expandedRowKey;return M.a.createElement("div",null,M.a.createElement("div",{className:Ie.a.flexV},M.a.createElement("div",{onClick:function(){return a.editCustomer(t)},className:Ie.a.iconWrap},M.a.createElement(s["a"],{placement:"top",title:"\u7f16\u8f91",mouseEnterDelay:.5},M.a.createElement("a",null,M.a.createElement(Te,{type:"icon-edit"})))),M.a.createElement(c["a"],{type:"vertical"}),M.a.createElement("div",{onClick:function(){return a.lockModal(t)},className:Ie.a.iconWrap},M.a.createElement(s["a"],{placement:"top",title:t.disabled?"\u89e3\u9501":"\u9501\u5b9a",mouseEnterDelay:.5},M.a.createElement("a",null,M.a.createElement(Te,{style:{color:t.disabled?"red":"grey"},type:"icon-unlock-noc",className:Ie.a.hoverCss}))))),M.a.createElement("div",null,n[0]===t.id?M.a.createElement("a",{onClick:function(){return a.setExpandedState(!1,t)},className:Ie.a.upArrow},"\u5a92\u4f53\u8d26\u6237"):M.a.createElement("a",{onClick:function(){return a.setExpandedState(!0,t)},className:Ie.a.rArrow,style:{color:"#303133"}},"\u5a92\u4f53\u8d26\u6237")))}}],a.childColumns=[{title:"\u5e73\u53f0\u6e20\u9053",dataIndex:"platformChannels",key:"platformChannels",width:"10%",render:function(e){return M.a.createElement("span",{style:{fontSize:13}},a.getPlatformChannelsStr(e))}},{title:"\u5a92\u4f53\u8d26\u53f7",width:"16%",render:function(e,t){var a,n="PLATFORM_CHANNELS_02"===t.platformChannels;return a=n?M.a.createElement("div",{style:{fontSize:13}},M.a.createElement("div",{style:{display:"flex"}},M.a.createElement("span",{style:{fontSize:11,minWidth:62}},"\u670d\u52a1\u5546\u540d\uff1a"),M.a.createElement("span",null,t.agencyName)),M.a.createElement("div",{style:{display:"flex"}},M.a.createElement("span",{style:{fontSize:11,minWidth:62}},"\u539f\u59cbID\uff1a"),M.a.createElement("span",null,t.wxOriginalId)),M.a.createElement("div",{style:{display:"flex"}},M.a.createElement("span",{style:{fontSize:11,minWidth:62}},"APP ID\uff1a"),M.a.createElement("span",null,t.wxAppId)),M.a.createElement("div",{style:{display:"flex"}},M.a.createElement("span",{style:{fontSize:11,minWidth:62}},"\u5fae\u4fe1\u53f7\uff1a"),M.a.createElement("span",null,t.wxCode))):M.a.createElement("div",{style:{fontSize:13}},M.a.createElement("div",{style:{display:"flex"}},M.a.createElement("span",{style:{fontSize:11,minWidth:72}},"\u5e7f\u544a\u8d26\u6237\u540d\uff1a"),M.a.createElement("span",null,t.advertisingAccountName)),M.a.createElement("div",{style:{display:"flex"}},M.a.createElement("span",{style:{fontSize:11,minWidth:72}},"\u5e7f\u544a\u8d26\u6237ID\uff1a"),M.a.createElement("span",null,t.advertisingAccountCode)),M.a.createElement("div",{style:{display:"flex"}},M.a.createElement("span",{style:{fontSize:11,minWidth:72}},"\u5e7f\u544a\u8d26\u6237\uff1a"),M.a.createElement("span",null,t.userName))),a}},{title:"\u7ed1\u5b9a\u65f6\u95f4",dataIndex:"createTime",key:"createTime",width:"12%",render:function(e){return M.a.createElement("span",{style:{fontSize:13}},L()(e).format("YYYY-MM-DD"))}},{title:"\u5e7f\u544a\u8fd0\u8425\u4eba",dataIndex:"operatorName",key:"operatorName",width:"12%",render:function(e){return M.a.createElement("span",{style:{fontSize:13}},e)}},{title:"\u72b6\u6001\u663e\u793a",width:"13%",render:function(e,t){var a=function(){var e="";switch(t.platformChannels){case"PLATFORM_CHANNELS_04":e="\u5df2\u540c\u6b65";break;default:e=t.refreshToken?"\u5df2\u540c\u6b65":"\u672a\u540c\u6b65";break}return e};return M.a.createElement("div",{style:{fontSize:13}},M.a.createElement("div",null,M.a.createElement("span",{style:{fontSize:11}},"\u8ba2\u5355\u540c\u6b65\uff1a"),M.a.createElement("span",null,a())),M.a.createElement("div",null,M.a.createElement("span",{style:{fontSize:11}},"\u5a92\u4f53\u72b6\u6001\uff1a"),M.a.createElement("span",null,a())))}},{title:"\u4f7f\u7528\u72b6\u6001",dataIndex:"disabled",key:"disabled",width:"12%",render:function(e){return e?M.a.createElement("span",{style:{color:"#E02C2D"}},"\u5df2\u505c\u7528"):M.a.createElement("span",{style:{color:"#FFB41F"}},"\u5df2\u542f\u7528")}},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",width:"11%",render:function(e,t){var n="PLATFORM_CHANNELS_04"===t.platformChannels,r=null!==t.refreshToken;return M.a.createElement(x["Fragment"],null,M.a.createElement("div",null,t.disabled?M.a.createElement("a",{onClick:function(){return a.isMediaDisabled(t,0)},style:{color:"#202020"}},"\u542f\u7528"):M.a.createElement("a",{onClick:function(){return a.isMediaDisabled(t,1)},style:{color:"#202020"}},"\u505c\u7528"),M.a.createElement(c["a"],{type:"vertical"}),M.a.createElement("a",{onClick:function(){return a.showBindAccount(!1,t)},style:{color:"#202020"}},"\u7f16\u8f91")),n?"":M.a.createElement("div",null,M.a.createElement("a",{onClick:function(){return a.authorization(t)},style:{color:"#E02C2D"}},r?"\u5df2\u6388\u6743":"\u6388\u6743")))}}],a.getAdverType=function(e){var t=a.props.advertisersType,n=t.find(function(t){return t.paramKey===e});return n.paramValue},a.getList=function(){var e=a.props.dispatch,t=a.state,n=t.customerOrMedia,r=t.selectedType,l=t.searchField,o=t.pagination,c=o.current,s=o.pageSize,d={advertisersType:r,customerField:"",isOrderByNum:0,mediaField:"",pageSize:s,pageIndex:c};"1"===n?d.customerField=l:d.mediaField=l,e({type:"customer/fetch",payload:i()({},d)}).then(function(e){if("A00000"===e.code){var t=a.state.pagination;a.setState({pagination:i()({},t,{total:e.data.totalCount}),loading:!1})}})},a.getAdvertisersType=function(){var e=a.props.dispatch;e({type:"customer/fetchAdvertisersType",payload:{keyType:"ADVERTISERS_TYPE"}})},a.getAcountTypeList=function(){var e=a.props.dispatch;e({type:"customer/fetchAcountTypeList",payload:{keyType:"ACOUNT_TYPE"}})},a.getPlatformChannels=function(){var e=a.props.dispatch;e({type:"customer/fetchPlatformChannels",payload:{keyType:"PLATFORM_CHANNELS"}})},a.getMemberList=function(){var e=a.props.dispatch;e({type:"customer/fetchMemberList",payload:{}})},a.getQrImg=function(){var e=a.props.dispatch;e({type:"customer/fetchQrImg",payload:{}}).then(function(){setTimeout(function(){a.setState({QrImg:"/static/webWeixinQr.jpg",showQrModal:!0})},500)})},a.toggleCustModalState=function(e){a.setState({showCustModal:e})},a.handleTableChange=function(e){a.setState({pagination:e},function(){a.getList()})},a.queryMediaAccountList=function(e){var t=a.props.dispatch,n=a.state,r=n.searchField,l=n.customerOrMedia,o={customerId:e.id};o.mediaField="2"===l?r:"",t({type:"customer/fetchMediaAccountList",payload:o})},a.setExpandedState=function(e,t){e?(a.queryMediaAccountList(t),a.setState({expandedRowKey:[t.id],expandedCustomer:t})):a.setState({expandedRowKey:[],expandedCustomer:{}})},a.expandedRowRender=function(){var e=a.props.mediaAccountList;return M.a.createElement(r["a"],{style:{margin:"28px 0 0"},bordered:!1,bodyStyle:{padding:0}},M.a.createElement(l["a"],{columns:a.childColumns,dataSource:e,pagination:!1,rowKey:function(e){return e.mediaAccountId},scroll:{y:240},style:{wordBreak:"break-all"}}),M.a.createElement("div",{className:Ie.a.bindAccount},M.a.createElement("button",{type:"button",onClick:function(){return a.showBindAccount(!0)},className:Ie.a.bindBtn},"\u7ed1\u5b9a\u8d26\u6237")))},a.handleSearch=function(e){e.preventDefault()},a.emptyEditingCustomer=function(){var e=a.props.dispatch;e({type:"customer/emptyEditingCustomer",payload:null})},a.addCustomer=function(){a.emptyEditingCustomer(),a.setState({customerModalTitle:"\u65b0\u589e\u5ba2\u6237",showCustModal:!0,isAddCustomer:!0})},a.editCustomer=function(e){a.getCustomerInfo(e.id),a.queryLogs(e.id),a.setState({customerModalTitle:e.companyName,showCustModal:!0,isAddCustomer:!1})},a.getCustomerInfo=function(e){var t=a.props.dispatch;t({type:"customer/fetchCustomerInfo",payload:{customerId:e}})},a.addOrUpdate=function(e,t){var r=a.props,l=r.dispatch,o=r.editingCustomer,c=a.state.isAddCustomer,s="customer/handleAddCustomer",d=i()({},e);c||(s="customer/handleEditCustomer",d.customerId=o.customerId),l({type:s,payload:i()({},d)}).then(function(e){"A00000"===e.code&&(n["a"].success(e.msg),a.setState({showCustModal:!1}),a.getList(),t.resetFields())})},a.queryLogs=function(e){var t=a.props.dispatch,n=a.state.logPagination,r={customerId:e,pageIndex:n.current,pageSize:n.pageSize};t({type:"customer/fetchLogList",payload:i()({},r)}).then(function(e){n.total=e.data.totalCount,a.setState({logPagination:n})})},a.handleTypesChange=function(e){var t=a.state.pagination;a.setState({selectedType:e,pagination:i()({},t,{pageSize:10,current:1})},function(){a.getList()})},a.onSearch=function(e){a.setState({searchField:e},function(){a.getList()})},a.handleSearchChange=function(e){e.persist(),clearTimeout(a.timeoutId);var t=a.state.pagination,n=e.currentTarget.value.trim();a.setState({searchField:n,pagination:i()({},t,{pageSize:10,current:1})},function(){a.timeoutId=setTimeout(function(){a.getList()},500)})},a.handleChange=function(e){a.setState({customerOrMedia:e,searchField:""},function(){a.getList()})},a.getFormSearch=function(){var e=a.props.advertisersType,t=void 0===e?[]:e,n=a.state,r=n.customerOrMedia,l=n.searchField;return M.a.createElement(N["a"],{style:{display:"flex"}},M.a.createElement(A["a"],{allowClear:!0,onChange:a.handleTypesChange,placeholder:"\u5e7f\u544a\u5ba2\u6237\u7c7b\u578b",className:Ie.a.selectWidth},t.map(function(e){return M.a.createElement(De,{value:e.paramKey,key:e.paramKey},e.paramValue)})),M.a.createElement(Fe,{compact:!0,style:{width:350}},M.a.createElement(A["a"],{defaultValue:r,onChange:a.handleChange},M.a.createElement(De,{value:"1"},"\u5ba2\u6237\u4fe1\u606f"),M.a.createElement(De,{value:"2"},"\u5a92\u4f53\u4fe1\u606f")),M.a.createElement(Oe,{onSearch:a.onSearch,onChange:a.handleSearchChange,value:l,allowClear:!0,placeholder:"\u641c\u7d22",className:Ie.a.inputWidth})),M.a.createElement("div",null,M.a.createElement("a",{style:{cursor:"pointer"},onClick:a.addCustomer,className:Ie.a.plusImg},M.a.createElement(Te,{type:"icon-add"}),M.a.createElement("span",null,"\u65b0\u589e\u5ba2\u6237"))))},a.lockModal=function(e){var t=a.props.dispatch,r=C()(a),l=e.disabled?"\u89e3\u9501":"\u9501\u5b9a";Ve({title:"".concat(l,"\u5ba2\u6237"),content:"\u786e\u5b9a\u8981".concat(l).concat(e.companyName,"\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",centered:!0,onOk:function(){t({type:"customer/handleIsDisabled",payload:{customerId:e.id,disabled:1===e.disabled?0:1}}).then(function(e){if("A00000"===e.code){n["a"].success(e.msg),r.getList();var t=r.state.expandedCustomer;"{}"!==JSON.stringify(t)&&r.setState({expandedRowKey:[]})}})},onCancel:function(){}})},a.changeBindPlatform=function(e){a.getInfoByUserName(e),a.setState({bindSelectedPlatform:e})},a.getMediaAccountInfo=function(e){var t=a.props.dispatch;t({type:"customer/fetchMediaAccountInfo",payload:{mediaAccountId:e}})},a.emptyEditingMediaAccount=function(){var e=a.props.dispatch;e({type:"customer/emptyEditingMediaAccount",payload:null})},a.showBindAccount=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=a.props.form;a.isCustomerDisabled()?n["a"].warning("\u8be5\u5a92\u4f53\u8d26\u6237\u5df2\u9501\u5b9a"):(e?r.resetFields():(a.changeBindPlatform(t.platformChannels),a.getMediaAccountInfo(t.mediaAccountId)),a.setState({showBindAccountModal:!0,isAddMediaAccount:e}))},a.bindAccountOk=function(e){e.persist();var t=a.props,r=t.form,l=t.dispatch,o=a.state,c=o.expandedCustomer.id,s=o.isAddMediaAccount,d=a.props.editingMediaAccount;r.validateFields(function(e,t){if(!e){var o=i()({customerId:c},t),u="customer/handleAddMediaAccount";s||(u="customer/handleEditMediaAccount",o.mediaAccountId=d.mediaAccountId),l({type:u,payload:i()({},o)}).then(function(e){if("A00000"===e.code){n["a"].success(e.msg),a.setState({showBindAccountModal:!1,bindSelectedPlatform:null}),r.resetFields();var t=a.state.expandedCustomer;a.queryMediaAccountList(t),a.emptyEditingMediaAccount()}})}})},a.bindAccountCancel=function(){var e=a.props.form;e.resetFields(),a.setState({showBindAccountModal:!1,bindSelectedPlatform:null}),a.emptyEditingMediaAccount()},a.isMediaDisabled=function(e,t){if(a.isCustomerDisabled())n["a"].warning("\u8be5\u5a92\u4f53\u8d26\u6237\u5df2\u9501\u5b9a");else{var r=a.props.dispatch,l=a.state.expandedCustomer,o=C()(a),i=e.disabled?"\u542f\u7528":"\u505c\u7528",c="PLATFORM_CHANNELS_02"===e.platformChannels,s=c?e.agencyName:e.advertisingAccountName;Ve({title:"".concat(i,"\u5a92\u4f53\u8d26\u6237"),content:"\u786e\u5b9a\u8981".concat(i).concat(s,"\u8d26\u6237\u5417\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",centered:!0,onOk:function(){r({type:"customer/handleIsMediaDisabled",payload:{customerId:l.id,mediaAccountId:e.mediaAccountId,disabled:t}}).then(function(e){"A00000"===e.code&&(n["a"].success(e.msg),o.queryMediaAccountList(l))})},onCancel:function(){}})}},a.isCustomerDisabled=function(){var e=a.state.expandedCustomer;return 1===e.disabled},a.handleChangePage=function(e){var t=a.props.editingCustomer;a.setState({logPagination:e},function(){a.queryLogs(t.customerId)})},a.getPlatformChannelsStr=function(e){var t={PLATFORM_CHANNELS_01:"\u5e7f\u70b9\u901a",PLATFORM_CHANNELS_02:"MP",PLATFORM_CHANNELS_03:"\u5934\u6761(\u5de8\u91cf\u5f15\u64ce)",PLATFORM_CHANNELS_04:"\u5934\u6761(\u9c81\u73ed)"};return t[e]},a.authorization=function(e){if(e.refreshToken)n["a"].warning("\u5df2\u6388\u6743");else{var t="";switch(e.platformChannels){case"PLATFORM_CHANNELS_01":t="https://developers.e.qq.com/oauth/authorize?client_id=1106503935&redirect_uri=http://bopsapi.madaomall.com/api/platform/qq/callback";break;case"PLATFORM_CHANNELS_02":a.wxCode=e.wxCode,a.getQrImg();break;case"PLATFORM_CHANNELS_03":t="https://ad.toutiao.com/openapi/audit/oauth.html?app_id=1629880193722376&state=your_custom_params&scope=%5B1%2C2%2C4%5D&redirect_uri=http%3A%2F%2Fbopsapi.madaomall.com%2Fapi%2Fplatform%2Foauth2%2Fcallback";break;case"PLATFORM_CHANNELS_04":break;default:break}t&&window.open(t)}},a.bindQrOk=function(){var e=a.state.expandedCustomer,t=a.props.dispatch;t({type:"customer/handleAuthMediaAccount",payload:{wxCode:a.wxCode}}).then(function(){a.setExpandedState(!0,e)}),a.setState({showQrModal:!1,QrImg:""})},a.bindQrCancel=function(){a.setState({showQrModal:!1,QrImg:""})},a.getInfoByUserName=function(){var e=a.props,t=e.form,n=e.dispatch,r=t.getFieldProps("userName").value,l=t.getFieldProps("platformChannels").value;"PLATFORM_CHANNELS_02"===l&&n({type:"customer/fetchMediaAccountInfo",payload:{userName:r}})},a.state={customerModalTitle:"",customerOrMedia:"1",searchField:"",selectedType:"",expandedRowKey:[],expandedCustomer:{},showCustModal:!1,showBindAccountModal:!1,isAddCustomer:!1,isAddMediaAccount:!1,bindSelectedPlatform:"",showQrModal:!1,QrImg:"",loading:!0,pagination:{showTotal:function(e){return"\u5171".concat(e,"\u6761")},showSizeChanger:!0,showQuickJumper:!0,pageSize:10,current:1},logPagination:{total:0,showTotal:function(e){return"\u5171".concat(e||0,"\u6761")},showSizeChanger:!0,pageSize:10,current:1}},a.bindAccountOk=P()(a.bindAccountOk,300),a}return v()(t,e),p()(t,[{key:"componentDidMount",value:function(){this.getList(),this.getAdvertisersType(),this.getAcountTypeList(),this.getPlatformChannels(),this.getMemberList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.showCustModal,n=t.pagination,o=t.expandedRowKey,i=t.isAddCustomer,c=t.logPagination,s=t.loading,d=t.customerModalTitle,u=this.props,m=u.customerList,p=u.logList,h=u.editingCustomer,y=u.advertisersType,g=function(){var t=e.state,a=t.bindSelectedPlatform,n=t.isAddMediaAccount,r=e.props,l=r.form.getFieldDecorator,o=r.platformChannels,i=r.acountTypeList,c=r.memberList,s=e.props.editingMediaAccount;s=s||{};var d={display:"inline-block",width:"calc(48% - 12px)"},u="PLATFORM_CHANNELS_02"!==a,m="PLATFORM_CHANNELS_01"===a,p=function(){var e="";return"PLATFORM_CHANNELS_04"===a&&(e=M.a.createElement(x["Fragment"],null,M.a.createElement(Pe,{label:"Appkey",style:d},l("appKey",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.appKey})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Pe,{label:"Appsecret",style:d},l("appSecret",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.appSecret})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))))),e},h=function(){var e="";return e=u?M.a.createElement(x["Fragment"],null,M.a.createElement(Pe,{label:"\u5e7f\u544a\u8d26\u6237ID",style:d},l("advertisingAccountCode",{rules:[{required:u,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.advertisingAccountCode})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Pe,{label:"\u5e7f\u544a\u8d26\u6237",style:d},l("userName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.userName})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Pe,{label:"\u8d26\u6237\u5bc6\u7801",style:d},l("passWord",{rules:[{required:!m&&u,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.passWord})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Pe,{label:"\u5e7f\u544a\u8d26\u6237\u540d",style:d},l("advertisingAccountName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.advertisingAccountName})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}})))):M.a.createElement(x["Fragment"],null,M.a.createElement(Pe,{label:"\u670d\u52a1\u5546\u540d",style:d},l("agencyName",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.agencyName})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Pe,{label:"\u539f\u59cbID",style:d},l("wxOriginalId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.wxOriginalId})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Pe,{label:"APP ID",style:d},l("wxAppId",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.wxAppId})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}})))),e};return M.a.createElement(N["a"],{layout:"inline",labelCol:{span:9},wrapperCol:{span:14}},M.a.createElement(Pe,{label:"\u5e73\u53f0\u6e20\u9053",style:d},l("platformChannels",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.platformChannels})(M.a.createElement(A["a"],{allowClear:!0,onChange:e.changeBindPlatform,disabled:!n,placeholder:"\u8bf7\u9009\u62e9",style:{width:180}},o.map(function(e){return M.a.createElement(De,{value:e.paramKey,key:e.paramKey},e.paramValue)})))),p(),h(),u?"":M.a.createElement(Pe,{label:"\u5fae\u4fe1\u53f7",style:d},l("wxCode",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165!"}],initialValue:s.wxCode})(M.a.createElement(S["a"],{allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",style:{width:180}}))),M.a.createElement(Pe,{label:"\u8d26\u6237\u7c7b\u578b",style:d},l("acountType",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}],initialValue:s.acountType})(M.a.createElement(A["a"],{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",style:{width:180}},i.map(function(e){return M.a.createElement(De,{value:e.paramKey,key:e.paramKey},e.paramValue)})))),M.a.createElement(Pe,{label:"\u5e7f\u544a\u8fd0\u8425\u4eba",style:d},l("operatorId",{rules:[{required:!1,message:"\u8bf7\u9009\u62e9!"}],initialValue:s.operatorId})(M.a.createElement(A["a"],{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",style:{width:180}},c.map(function(e){return M.a.createElement(De,{value:e.operatorId,key:e.operatorId},e.operatorName)})))),M.a.createElement(Pe,{label:"\u662f\u5426\u5957\u6237",style:d},l("isToParaphrase",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9!"}],initialValue:s.isToParaphrase})(M.a.createElement(A["a"],{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",style:{width:180}},M.a.createElement(De,{value:0,key:0},"\u672a\u5957\u6237"),M.a.createElement(De,{value:1,key:1},"\u5957\u6237")))))},f=function(){var t=e.state,a=t.showBindAccountModal,n=t.isAddMediaAccount;return M.a.createElement(b["a"],{title:n?"\u7ed1\u5b9a\u8d26\u6237":"\u4fee\u6539\u8d26\u6237",centered:!0,visible:a,onOk:e.bindAccountOk,onCancel:e.bindAccountCancel,width:662},g())},E=function(){var t=e.state,a=t.showQrModal,n=t.QrImg;return M.a.createElement(b["a"],{title:"\u4e8c\u7ef4\u7801",centered:!0,visible:a,onOk:e.bindQrOk,onCancel:e.bindQrCancel,width:662},M.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},M.a.createElement("img",{src:n,alt:"",style:{width:250,height:250}})))};return M.a.createElement(Ee,{hiddenBreadcrumb:!0,wrapperClassName:"noTitle",content:this.getFormSearch()},M.a.createElement(r["a"],{style:{margin:"28px 0 0"},bordered:!1,bodyStyle:{padding:0}},M.a.createElement(l["a"],{dataSource:m,columns:this.columns,rowKey:function(e){return e.id},expandedRowRender:this.expandedRowRender,expandedRowKeys:o,pagination:n,onChange:this.handleTableChange,onShowSizeChange:this.handleTableChange,loading:s})),M.a.createElement(Me,{title:d,showCustModal:a,isAddCustomer:i,changeState:this.toggleCustModalState,handleOk:this.addOrUpdate,customerObj:h,logList:p,advertisersType:y,logPagination:c,changePage:this.handleChangePage}),f(),E())}}]),t}(x["Component"]),le=oe))||le)||le);t["default"]=ze},Dnn4:function(e,t,a){e.exports={"children-content":"antd-pro-components-page-header-wrapper-index-children-content",main:"antd-pro-components-page-header-wrapper-index-main",wide:"antd-pro-components-page-header-wrapper-index-wide",detail:"antd-pro-components-page-header-wrapper-index-detail",row:"antd-pro-components-page-header-wrapper-index-row",logo:"antd-pro-components-page-header-wrapper-index-logo","title-content":"antd-pro-components-page-header-wrapper-index-title-content",content:"antd-pro-components-page-header-wrapper-index-content",title:"antd-pro-components-page-header-wrapper-index-title",extraContent:"antd-pro-components-page-header-wrapper-index-extraContent",action:"antd-pro-components-page-header-wrapper-index-action"}},"lh+i":function(e,t,a){e.exports={main:"antd-pro-components-page-header-wrapper-grid-content-main",wide:"antd-pro-components-page-header-wrapper-grid-content-wide"}},"zjn/":function(e,t,a){e.exports={mar:"antd-pro-pages-dashboard-manage-customer-mar",selectWidth:"antd-pro-pages-dashboard-manage-customer-selectWidth",inputWidth:"antd-pro-pages-dashboard-manage-customer-inputWidth",plusImg:"antd-pro-pages-dashboard-manage-customer-plusImg",iconWrap:"antd-pro-pages-dashboard-manage-customer-iconWrap",rArrow:"antd-pro-pages-dashboard-manage-customer-rArrow",upArrow:"antd-pro-pages-dashboard-manage-customer-upArrow",flexV:"antd-pro-pages-dashboard-manage-customer-flexV",bindAccount:"antd-pro-pages-dashboard-manage-customer-bindAccount",bindBtn:"antd-pro-pages-dashboard-manage-customer-bindBtn",hoverCss:"antd-pro-pages-dashboard-manage-customer-hoverCss"}}}]);